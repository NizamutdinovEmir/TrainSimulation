# TrainSimulation

## Использованные технологии: C#, SOLID, GRASP

## Формулировка

В некотором абстрактном городе был запущен проект по строительству транспортной системы использующей поезда на магнитной
подушке. Для сокращения расходов на эксплуатацию системы, было принято решение использовать автоматизированные
транспортные маршруты, самостоятельно контролирующие передвижения поездов без необходимости нанимать машинистов.
В рамках проектирования данной транспортной системы, возникла необходимость моделирования этих транспортных
маршрутов, для того чтобы удостовериться в корректности их работы и предотвратить инциденты.

Вам как разработчикам была поставлена задача разработать данный симулятор.

## Функциональные требования

Основной информацией, которую должен выдавать ваш симулятор, является результат прохождения маршрута. Данный результат
может быть как успешным, так и нет ([подробнее](#станции)). Также результат должен содержать информацию об общем
времени, затраченном для прохождения пути.

### Поезда

В рамках симулятора поезда имеют следующие атрибуты:

- масса
- скорость
- ускорение
- максимально допустимая сила

Поезда должны уметь рассчитывать время прохождения определённого расстояния, эти вычисления должны основываться на
текущей скорости и ускорении поезда. Скорость и ускорение поезда изначально имеют нулевые значения.

Также к поездам можно приложить какую-либо силу, это происходит
на [силовых магнитных путях](#силовые-магнитные-пути). Приложение к поезду силы приводит к перерасчёту его
ускорения (рассчитываемого по формуле $ускорение={сила \over масса}$). При попытке приложить к поезду силу, превышающую
максимально допустимую, операция возвращает неудачу.

В данном симуляторе используются крайне упрощённые законы физики – поезда двигаются по законам материальной точки.

Поездам также задаётся точность – временной промежуток, на который разбиваются вычисления итогового времени прохождения
расстояния. Соответственно расчёт итогового времени прохождения расстояния должны происходить итеративно.

Каждая итерация расчёта времени предполагает расчёт результирующей скорости

$$результирующая\ скорость = текущая\ скорость + ускорение * точность$$

И расчёт пройденного расстояния

$$пройденное\ расстояние = результирующая\ скорость * точность$$

После расчёта пройденного расстояния, оно вычитается из оставшегося. Итерации продолжаются пока оставшееся расстояние не
будет меньше или равно нулю.

Следует принимать во внимание граничные случаи прохождения расстояния, когда поезд не имеет ни скорости, ни ускорения,
или же когда скорость поезда становится отрицательной. В таких случаях прохождение расстояния завершается неудачей.

### Участок маршрута

Маршрут транспортной системы состоит из участков, они представляют собой магнитные пути по которым могут передвигаться
поезда. Существуют несколько различных участков маршрута и поведение поезда на них отличается друг от друга.

Результатом прохождения поезда по участку пути, может являться либо успех, содержащий время прохождения, либо неудача.

#### Обычные магнитные пути

Обычные магнитные пути имеют продолжительность, которая влияет на время их прохождения. Успех прохождения через такие
пути определяется успехом прохождения поездом их расстояния.

#### Силовые магнитные пути

Силовые магнитные пути, как следует из названия, прикладывают к поезду силу на всём своём протяжении, эта сила может
быть как положительной, так и отрицательной (в таком случае поезд будет замедляться).

Так же как и обычные, силовые пути имеют продолжительность, влияющую на время их прохождения и успех их прохождения
определяется успехом прохождения поедом их расстояния.

#### Станции

Ещё одним видом участка маршрута являются станции. Когда поезд прибывает на станцию, происходит высадка и посадка
пассажиров. Факторы загруженности на высадку и посадку влияют на время прохождения станции поездом.

На станциях расположены силовые модули, тормозящие поезда до их остановки и разгоняющие их до скорости, с которой поезд
на неё прибыл. Но возможности этих модулей ограничены, станции имеют лимит по скорости приходящего поезда, поезда,
приходящие со скоростью, превышающую её не будут остановлены, что соответственно обозначает неудачу прохождения данного
участка маршрута.

### Маршрут

Маршрут является набором его участков и отвечает за логику прохождения поезда по этим участкам, а также обработку
результатов этих прохождений.

По завершению маршрута, поезд должен остановиться, для этого маршрут имеет механику схожую со станциями. На конце
маршрута расположены силовые модули также имеющие лимиты по скорости. Поэтому, если после прохождения всех участков
маршрута, поезд имеет скорость, превышающую допустимую – прохождение пути будет неудачно.
